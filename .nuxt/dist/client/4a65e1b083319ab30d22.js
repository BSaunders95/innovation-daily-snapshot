(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{225:function(r,e,t){r.exports=t.p+"img/9b2b33f.png"},367:function(r,e,t){"use strict";t.r(e);t(21),t(32);var o,n=t(10),d=t(109),c=t.n(d),l={data:function(){return{showAddUser:!1,userToAdd:"",passwordToAdd:"",users:[],departments:[],errors:{},hasNameErrors:!1,hasPasswordErrors:!1}},mounted:function(){this.getUsers()},methods:{getUsers:(o=Object(n.a)(regeneratorRuntime.mark((function r(){var e,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=[],t=this,r.next=4,c.a.get("/api/departments").then((function(r){return r.data.forEach((function(r){e.push(r)})),c.a.get("/api/users")})).then((function(r){r.data.forEach((function(r){t.users.push({name:r.name,authRoles:t.formatAuthRoles(r.authRoles,e),superUser:r.superUser,edit:r._id})}))}));case 4:case"end":return r.stop()}}),r,this)}))),function(){return o.apply(this,arguments)}),addUser:function(){var r=this;this.clearErrors(),c.a.post("/api/users",{name:this.userToAdd,password:this.passwordToAdd,authRoles:[]}).then((function(e){200===e.status&&(r.showAddUser=!1,r.userToAdd="",r.passwordToAdd="",r.users=[],r.getUsers())})).catch((function(e){r.errors=e.response.data,void 0!==r.errors.nameError&&(r.hasNameErrors=!0),void 0!==r.errors.passwordError&&(r.hasPasswordErrors=!0)}))},clearErrors:function(){this.errors={},this.hasNameErrors=!1,this.hasPasswordErrors=!1},formatAuthRoles:function(r,e){var t=[];return r.forEach((function(r){e.forEach((function(e){r===e._id&&t.push(e)}))})),t}}},h=t(33),component=Object(h.a)(l,(function(){var r=this,e=r.$createElement,o=r._self._c||e;return o("div",{staticClass:"container-fluid mt-4"},[o("h1",{staticClass:"h1",staticStyle:{"padding-bottom":"40px"}},[r._v("\n    Users\n  ")]),r._v(" "),o("p",[r._v("\n    Please see below a list of users and their administrative roles\n  ")]),r._v(" "),o("b-col",[o("b-row",{staticClass:"justify-content-md-center"},[o("b-col",{attrs:{col:"",sm:"4"}},[o("b-table",{attrs:{items:r.users},scopedSlots:r._u([{key:"cell(authroles)",fn:function(e){return[e.item.authRoles.length>0?o("div",r._l(e.item.authRoles,(function(e,t){return o("p",{key:"authRole-"+t},[o("span",[r._v("\n                  "+r._s(e.name)+"\n                ")])])})),0):o("div",[o("span",{staticStyle:{opacity:"0.5"}},[o("i",[r._v("\n                  None\n                ")])])])]}},{key:"cell(superUser)",fn:function(e){return[o("span",[r._v(r._s(e.item.superUser?"✓":"✗"))])]}},{key:"cell(edit)",fn:function(r){return[o("a",{attrs:{href:"/users/"+r.item.edit}},[o("img",{attrs:{src:t(225),alt:"Edit",height:"24",width:"24"}})])]}}])})],1)],1)],1),r._v(" "),o("b-col",[o("b-row",{staticClass:"justify-content-md-center"},[o("b-col",{attrs:{col:"",sm:"2"}},[o("b-btn",{attrs:{pill:"",variant:"outline-secondary"},on:{click:function(e){r.showAddUser=!0}}},[r._v("\n          +\n        ")]),r._v(" "),o("b-modal",{attrs:{title:"Add Department","header-bg-variant":"secondary"},on:{hide:r.clearErrors},scopedSlots:r._u([{key:"modal-footer",fn:function(){return[o("b-button",{staticClass:"float-right",attrs:{variant:"outline-secondary",size:"sm"},on:{click:r.addUser}},[r._v("\n              Add\n            ")])]},proxy:!0}]),model:{value:r.showAddUser,callback:function(e){r.showAddUser=e},expression:"showAddUser"}},[o("b-alert",{attrs:{variant:"danger"},model:{value:r.hasNameErrors,callback:function(e){r.hasNameErrors=e},expression:"hasNameErrors"}},[r._v("\n            "+r._s(r.errors.nameError)+"\n          ")]),r._v(" "),o("b-form-input",{staticStyle:{"margin-bottom":"16px"},attrs:{placeholder:"Name"},model:{value:r.userToAdd,callback:function(e){r.userToAdd=e},expression:"userToAdd"}}),r._v(" "),o("b-alert",{attrs:{variant:"danger"},model:{value:r.hasPasswordErrors,callback:function(e){r.hasPasswordErrors=e},expression:"hasPasswordErrors"}},[r._v("\n            "+r._s(r.errors.passwordError)+"\n          ")]),r._v(" "),o("b-form-input",{attrs:{placeholder:"Password"},model:{value:r.passwordToAdd,callback:function(e){r.passwordToAdd=e},expression:"passwordToAdd"}})],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);