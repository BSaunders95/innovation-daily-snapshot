exports.ids=[7],exports.modules={32:function(r,e,t){r.exports=t.p+"img/9b2b33f.png"},46:function(r,e,t){"use strict";t.r(e);var o=t(11),n=t.n(o),d={data:()=>({showAddUser:!1,userToAdd:"",passwordToAdd:"",users:[],departments:[],errors:{},hasNameErrors:!1,hasPasswordErrors:!1}),mounted(){this.getUsers()},methods:{async getUsers(){const r=[],e=this;await n.a.get("/api/departments").then((function(e){return e.data.forEach(e=>{r.push(e)}),n.a.get("/api/users")})).then((function(t){t.data.forEach((function(t){e.users.push({name:t.name,authRoles:e.formatAuthRoles(t.authRoles,r),superUser:t.superUser,edit:t._id})}))}))},addUser(){this.clearErrors(),n.a.post("/api/users",{name:this.userToAdd,password:this.passwordToAdd,authRoles:[]}).then(r=>{200===r.status&&(this.showAddUser=!1,this.userToAdd="",this.passwordToAdd="",this.users=[],this.getUsers())}).catch(r=>{this.errors=r.response.data,void 0!==this.errors.nameError&&(this.hasNameErrors=!0),void 0!==this.errors.passwordError&&(this.hasPasswordErrors=!0)})},clearErrors(){this.errors={},this.hasNameErrors=!1,this.hasPasswordErrors=!1},formatAuthRoles(r,e){const t=[];return r.forEach(r=>{e.forEach(e=>{r===e._id&&t.push(e)})}),t}}},l=t(1);var component=Object(l.a)(d,(function(){var r=this,e=r.$createElement,o=r._self._c||e;return o("div",{staticClass:"container-fluid mt-4"},[r._ssrNode('<h1 class="h1" style="padding-bottom: 40px">\n    Users\n  </h1> <p>\n    Please see below a list of users and their administrative roles\n  </p> '),o("b-col",[o("b-row",{staticClass:"justify-content-md-center"},[o("b-col",{attrs:{col:"",sm:"4"}},[o("b-table",{attrs:{items:r.users},scopedSlots:r._u([{key:"cell(authroles)",fn:function(e){return[e.item.authRoles.length>0?o("div",r._l(e.item.authRoles,(function(e,t){return o("p",{key:"authRole-"+t},[o("span",[r._v("\n                  "+r._s(e.name)+"\n                ")])])})),0):o("div",[o("span",{staticStyle:{opacity:"0.5"}},[o("i",[r._v("\n                  None\n                ")])])])]}},{key:"cell(superUser)",fn:function(e){return[o("span",[r._v(r._s(e.item.superUser?"✓":"✗"))])]}},{key:"cell(edit)",fn:function(r){return[o("a",{attrs:{href:"/users/"+r.item.edit}},[o("img",{attrs:{src:t(32),alt:"Edit",height:"24",width:"24"}})])]}}])})],1)],1)],1),r._ssrNode(" "),o("b-col",[o("b-row",{staticClass:"justify-content-md-center"},[o("b-col",{attrs:{col:"",sm:"2"}},[o("b-btn",{attrs:{pill:"",variant:"outline-secondary"},on:{click:function(e){r.showAddUser=!0}}},[r._v("\n          +\n        ")]),r._v(" "),o("b-modal",{attrs:{title:"Add Department","header-bg-variant":"secondary"},on:{hide:r.clearErrors},scopedSlots:r._u([{key:"modal-footer",fn:function(){return[o("b-button",{staticClass:"float-right",attrs:{variant:"outline-secondary",size:"sm"},on:{click:r.addUser}},[r._v("\n              Add\n            ")])]},proxy:!0}]),model:{value:r.showAddUser,callback:function(e){r.showAddUser=e},expression:"showAddUser"}},[o("b-alert",{attrs:{variant:"danger"},model:{value:r.hasNameErrors,callback:function(e){r.hasNameErrors=e},expression:"hasNameErrors"}},[r._v("\n            "+r._s(r.errors.nameError)+"\n          ")]),r._v(" "),o("b-form-input",{staticStyle:{"margin-bottom":"16px"},attrs:{placeholder:"Name"},model:{value:r.userToAdd,callback:function(e){r.userToAdd=e},expression:"userToAdd"}}),r._v(" "),o("b-alert",{attrs:{variant:"danger"},model:{value:r.hasPasswordErrors,callback:function(e){r.hasPasswordErrors=e},expression:"hasPasswordErrors"}},[r._v("\n            "+r._s(r.errors.passwordError)+"\n          ")]),r._v(" "),o("b-form-input",{attrs:{placeholder:"Password"},model:{value:r.passwordToAdd,callback:function(e){r.passwordToAdd=e},expression:"passwordToAdd"}})],1)],1)],1)],1)],2)}),[],!1,(function(r){}),null,"0d6763a5");e.default=component.exports}};
//# sourceMappingURL=ba3d76d1443fa14b0d56.js.map